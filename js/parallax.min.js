!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(t,e)}):"object"==typeof exports?i(t,require("jquery")):i(t,t.jQuery||t.Zepto)}(this,function(t,i){"use strict";var e,s,o,n="remodal",a=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||n,r=i.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+a}).join(" "),h=i.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+a}).join(" "),l=i.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),d={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},c={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},p=void 0!==(e=document.createElement("div").style).animationName||void 0!==e.WebkitAnimationName||void 0!==e.MozAnimationName||void 0!==e.msAnimationName||void 0!==e.OAnimationName,f=/iPad|iPhone|iPod/.test(navigator.platform);function m(t){if(p&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var i,e,s,o,n=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",a=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(n=n.split(", "),a=a.split(", "),r=r.split(", "),o=0,e=n.length,i=Number.NEGATIVE_INFINITY;o<e;o++)(s=parseFloat(n[o])*parseInt(r[o],10)+parseFloat(a[o]))>i&&(i=s);return i}function u(){if(i(document).height()<=i(window).height())return 0;var t,e,s=document.createElement("div"),o=document.createElement("div");return s.style.visibility="hidden",s.style.width="100px",document.body.appendChild(s),t=s.offsetWidth,s.style.overflow="scroll",o.style.width="100%",s.appendChild(o),e=o.offsetWidth,s.parentNode.removeChild(s),t-e}function g(){if(!f){var t,e,s=i("html"),o=b("is-locked");s.hasClass(o)&&(e=i(document.body),t=parseInt(e.css("padding-right"),10)-u(),e.css("padding-right",t+"px"),s.removeClass(o))}}function x(t,i,e,s){var o=b("is",i),n=[b("is",d.CLOSING),b("is",d.OPENING),b("is",d.CLOSED),b("is",d.OPENED)].join(" ");t.$bg.removeClass(n).addClass(o),t.$overlay.removeClass(n).addClass(o),t.$wrapper.removeClass(n).addClass(o),t.$modal.removeClass(n).addClass(o),t.state=i,!e&&t.$modal.trigger({type:i,reason:s},[{reason:s}])}function v(t,e,s){var o=0,n=function(t){t.target===this&&o++},a=function(t){t.target===this&&0==--o&&(i.each(["$bg","$overlay","$wrapper","$modal"],function(t,i){s[i].off(r+" "+h)}),e())};i.each(["$bg","$overlay","$wrapper","$modal"],function(t,i){s[i].on(r,n).on(h,a)}),t(),0===m(s.$bg)&&0===m(s.$overlay)&&0===m(s.$wrapper)&&0===m(s.$modal)&&(i.each(["$bg","$overlay","$wrapper","$modal"],function(t,i){s[i].off(r+" "+h)}),e())}function $(t){t.state!==d.CLOSED&&(i.each(["$bg","$overlay","$wrapper","$modal"],function(i,e){t[e].off(r+" "+h)}),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),g(),x(t,d.CLOSED,!0))}function b(){for(var t=a,i=0;i<arguments.length;++i)t+="-"+arguments[i];return t}function y(){var t,e,o=location.hash.replace("#","");if(o){try{e=i("[data-"+n+'-id="'+o+'"]')}catch(t){}e&&e.length&&(t=i[n].lookup[e.data(n)])&&t.settings.hashTracking&&t.open()}else s&&s.state===d.OPENED&&s.settings.hashTracking&&s.close()}function C(t,e){var s=i(document.body),o=this;o.settings=i.extend({},l,e),o.index=i[n].lookup.push(o)-1,o.state=d.CLOSED,o.$overlay=i("."+b("overlay")),null!==o.settings.appendTo&&o.settings.appendTo.length&&(s=i(o.settings.appendTo)),o.$overlay.length||(o.$overlay=i("<div>").addClass(b("overlay")+" "+b("is",d.CLOSED)).hide(),s.append(o.$overlay)),o.$bg=i("."+b("bg")).addClass(b("is",d.CLOSED)),o.$modal=t.addClass(a+" "+b("is-initialized")+" "+o.settings.modifier+" "+b("is",d.CLOSED)).attr("tabindex","-1"),o.$wrapper=i("<div>").addClass(b("wrapper")+" "+o.settings.modifier+" "+b("is",d.CLOSED)).hide().append(o.$modal),s.append(o.$wrapper),o.$wrapper.on("click."+a,"[data-"+n+'-action="close"]',function(t){t.preventDefault(),o.close()}),o.$wrapper.on("click."+a,"[data-"+n+'-action="cancel"]',function(t){t.preventDefault(),o.$modal.trigger(c.CANCELLATION),o.settings.closeOnCancel&&o.close(c.CANCELLATION)}),o.$wrapper.on("click."+a,"[data-"+n+'-action="confirm"]',function(t){t.preventDefault(),o.$modal.trigger(c.CONFIRMATION),o.settings.closeOnConfirm&&o.close(c.CONFIRMATION)}),o.$wrapper.on("click."+a,function(t){i(t.target).hasClass(b("wrapper"))&&o.settings.closeOnOutsideClick&&o.close()})}C.prototype.open=function(){var t,e=this;e.state!==d.OPENING&&e.state!==d.CLOSING&&((t=e.$modal.attr("data-"+n+"-id"))&&e.settings.hashTracking&&(o=i(window).scrollTop(),location.hash=t),s&&s!==e&&$(s),s=e,function(){if(!f){var t,e,s=i("html"),o=b("is-locked");s.hasClass(o)||(e=i(document.body),t=parseInt(e.css("padding-right"),10)+u(),e.css("padding-right",t+"px"),s.addClass(o))}}(),e.$bg.addClass(e.settings.modifier),e.$overlay.addClass(e.settings.modifier).show(),e.$wrapper.show().scrollTop(0),e.$modal.focus(),v(function(){x(e,d.OPENING)},function(){x(e,d.OPENED)},e))},C.prototype.close=function(t){var e=this;e.state!==d.OPENING&&e.state!==d.CLOSING&&e.state!==d.CLOSED&&(e.settings.hashTracking&&e.$modal.attr("data-"+n+"-id")===location.hash.substr(1)&&(location.hash="",i(window).scrollTop(o)),v(function(){x(e,d.CLOSING,!1,t)},function(){e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),g(),x(e,d.CLOSED,!1,t)},e))},C.prototype.getState=function(){return this.state},C.prototype.destroy=function(){var t=i[n].lookup;$(this),this.$wrapper.remove(),delete t[this.index],0===i.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(b("is",d.CLOSING)+" "+b("is",d.OPENING)+" "+b("is",d.CLOSED)+" "+b("is",d.OPENED)))},i[n]={lookup:[]},i.fn[n]=function(t){var e,s;return this.each(function(o,a){null==(s=i(a)).data(n)?(e=new C(s,t),s.data(n,e.index),e.settings.hashTracking&&s.attr("data-"+n+"-id")===location.hash.substr(1)&&e.open()):e=i[n].lookup[s.data(n)]}),e},i(document).ready(function(){i(document).on("click","[data-"+n+"-target]",function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-"+n+"-target"),s=i("[data-"+n+'-id="'+e+'"]');i[n].lookup[s.data(n)].open()}),i(document).find("."+a).each(function(t,e){var s=i(e),o=s.data(n+"-options");o?("string"==typeof o||o instanceof String)&&(o=function(t){var i,e,s,o,n={};for(o=0,e=(i=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;o<e;o++)i[o]=i[o].split(":"),("string"==typeof(s=i[o][1])||s instanceof String)&&(s="true"===s||"false"!==s&&s),("string"==typeof s||s instanceof String)&&(s=isNaN(s)?s:+s),n[i[o][0]]=s;return n}(o)):o={},s[n](o)}),i(document).on("keydown."+a,function(t){s&&s.settings.closeOnEscape&&s.state===d.OPENED&&27===t.keyCode&&s.close()}),i(window).on("hashchange."+a,y)})}),function(t,i,e,s){function o(i,e){var n=this;"object"==typeof e&&(delete e.refresh,delete e.render,t.extend(this,e)),this.$element=t(i),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var a=(this.position+"").toLowerCase().match(/\S+/g)||[];if(a.length<1&&a.push("center"),1==a.length&&a.push(a[0]),"top"!=a[0]&&"bottom"!=a[0]&&"left"!=a[1]&&"right"!=a[1]||(a=[a[1],a[0]]),this.positionX!==s&&(a[0]=this.positionX.toLowerCase()),this.positionY!==s&&(a[1]=this.positionY.toLowerCase()),n.positionX=a[0],n.positionY=a[1],"left"!=this.positionX&&"right"!=this.positionX&&(isNaN(parseInt(this.positionX))?this.positionX="center":this.positionX=parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(isNaN(parseInt(this.positionY))?this.positionY="center":this.positionY=parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=t("<div />").prependTo(this.mirrorContainer);var r=this.$element.find(">.parallax-slider"),h=!1;0==r.length?this.$slider=t("<img />").prependTo(this.$mirror):(this.$slider=r.prependTo(this.$mirror),h=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){n.naturalHeight&&n.naturalWidth||(n.naturalHeight=this.naturalHeight||this.height||1,n.naturalWidth=this.naturalWidth||this.width||1),n.aspectRatio=n.naturalWidth/n.naturalHeight,o.isSetup||o.setup(),o.sliders.push(n),o.isFresh=!1,o.requestRender()}),h||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||r.length>0)&&this.$slider.trigger("load")}!function(){for(var t=0,e=["ms","moz","webkit","o"],s=0;s<e.length&&!i.requestAnimationFrame;++s)i.requestAnimationFrame=i[e[s]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[e[s]+"CancelAnimationFrame"]||i[e[s]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),n=i.setTimeout(function(){e(s+o)},o);return t=s+o,n}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,mirrorContainer:"body",refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t,i=o.winHeight,e=o.docHeight,s=Math.min(this.boxOffsetTop,e-i),n=Math.max(this.boxOffsetTop+this.boxHeight-i,0),a=this.boxHeight+(s-n)*(1-this.speed)|0,r=(this.boxOffsetTop-s)*(1-this.speed)|0;a*this.aspectRatio>=this.boxWidth?(this.imageWidth=a*this.aspectRatio|0,this.imageHeight=a,this.offsetBaseTop=r,t=this.imageWidth-this.boxWidth,"left"==this.positionX?this.offsetLeft=0:"right"==this.positionX?this.offsetLeft=-t:isNaN(this.positionX)?this.offsetLeft=-t/2|0:this.offsetLeft=Math.max(this.positionX,-t)):(this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0,t=this.imageHeight-a,"top"==this.positionY?this.offsetBaseTop=r:"bottom"==this.positionY?this.offsetBaseTop=r-t:isNaN(this.positionY)?this.offsetBaseTop=r-t/2|0:this.offsetBaseTop=r+Math.max(this.positionY,-t))},render:function(){var t=o.scrollTop,i=o.scrollLeft,e=this.overScrollFix?o.overScroll:0,s=t+o.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=s?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-i,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d("+this.mirrorLeft+"px, "+(this.mirrorTop-e)+"px, 0px)",visibility:this.visibility,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d("+this.offsetLeft+"px, "+this.offsetTop+"px, 0px)",position:"absolute",height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=this,n=t(e),a=t(i),r=function(){o.winHeight=a.height(),o.winWidth=a.width(),o.docHeight=n.height(),o.docWidth=n.width()},h=function(){var t=a.scrollTop(),i=o.docHeight-o.winHeight,e=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(i,t)),o.scrollLeft=Math.max(0,Math.min(e,a.scrollLeft())),o.overScroll=Math.max(t-i,Math.min(t,0))};a.on("resize.px.parallax load.px.parallax",function(){r(),s.refresh(),o.isFresh=!1,o.requestRender()}).on("scroll.px.parallax load.px.parallax",function(){h(),o.requestRender()}),r(),h(),this.isReady=!0;var l=-1;!function t(){if(l==i.pageYOffset)return i.requestAnimationFrame(t),!1;l=i.pageYOffset,s.render(),i.requestAnimationFrame(t)}()}},configure:function(i){"object"==typeof i&&(delete i.refresh,delete i.render,t.extend(this.prototype,i))},refresh:function(){t.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,function(){this.render()})},requestRender:function(){this.render(),this.isBusy=!1},destroy:function(e){var s,n=t(e).data("px.parallax");for(n.$mirror.remove(),s=0;s<this.sliders.length;s+=1)this.sliders[s]==n&&this.sliders.splice(s,1);t(e).data("px.parallax",!1),0===this.sliders.length&&(t(i).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,o.isSetup=!1)}});var n=t.fn.parallax;t.fn.parallax=function(s){return this.each(function(){var n=t(this),a="object"==typeof s&&s;this==i||this==e||n.is("body")?o.configure(a):n.data("px.parallax")?"object"==typeof s&&t.extend(n.data("px.parallax"),a):(a=t.extend({},n.data(),a),n.data("px.parallax",new o(this,a))),"string"==typeof s&&("destroy"==s?o.destroy(this):o[s]())})},t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=n,this},t(function(){t('[data-parallax="scroll"]').parallax()})}(jQuery,window,document);